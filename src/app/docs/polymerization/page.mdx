import { Libraries } from '../../../components/docs/ModelList'

export const metadata = {
  title: '聚合接口接入',
  description: '聚合接口接入'
}

# 聚合模型接入指南

<Note>在尝试接入我们的一站式服务接口前，请先确保执行以下步骤，以保障您的使用体验无忧：</Note>

- 查验您的账户余额以确认资金是否足够。
- 访问我们的[计费规则](/docs/pricing)页面，详细了解不同模型的费用标准，帮助您进行预算规划。

## 基础域名

<CodeGroup>

```bash {{ language: 'shell' }}
https://api.ioii.cn/v1/agicto/chat
```

</CodeGroup>

## Header 参数

<Properties>
  <Property name="Authorization" type="string">
    鉴权key值，可在[个人中心](/space)获取
  </Property>
</Properties>

## Body 参数

<Properties>
  <Property name="model" type="string">
    选择要使用的语言模型。可在[计费规则](/docs/pricing)页面查看
  </Property>
  <Property name="messages" type="array">
    定义对话的消息列表，每个消息包含角色（user、assistant、system）和内容。
  </Property>
  <Property name="max_tokens" type="number">
    限制生成文本的最大 token 数。
  </Property>
  <Property name="presence_penalty" type="number">
    控制生成文本中的重复度，值越高表示重复度越低。
  </Property>
  <Property name="stream" type="boolean">
    设置为 true 时，以流形式返回结果；设置为 false 时，返回完整的生成文本。
  </Property>
  <Property name="temperature" type="number">
    调整生成文本的多样性，值越高生成越随机。
  </Property>
  <Property name="top_p" type="number">
    采样参数，控制生成文本的多样性。
  </Property>
  <Property name="top_k" type="number">
    限制模型在每步选择时考虑的 token 范围。
  </Property>
  <Property name="enable_search" type="boolean">
    设置为 true 时，允许模型进行联网搜索以获得更全面的信息。(**联网功能仅支持「百川」、「通义千问」模型**)
  </Property>
</Properties>

## 参数示例

<CodeGroup>

```json {{ title: '参数示例' }}
{
  "model": "gpt-3.5-turbo",
  "messages": [
    { "role": "system", "content": "You are a helpful assistant." },
    { "role": "user", "content": "Tell me a joke." },
    { "role": "assistant", "content": "Why did the chicken cross the road?" }
  ],
  "max_tokens": 50,
  "presence_penalty": 0.5,
  "stream": false,
  "temperature": 0.7,
  "top_p": 1.0,
  "top_k": 50,
  "enable_search": true
}
```

</CodeGroup>

## 在代码中使用

<CodeGroup>

```bash {{ title: 'cURL' }}
curl --location 'https://api.ioii.cn/v1/agicto/chat' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer 自己的API key' \
--data '{
    "model": "360gpt-pro",
    "messages": [

        {
            "role": "user",
            "content": "讲个笑话"
        }
    ],
    "max_tokens": 50,
    "presence_penalty": 0.5,
    "stream": false,
    "temperature": 0.7,
    "top_p": 1.0,
    "top_k": 50,
    "enable_search": true
}'
```

```js {{ title: 'Node.js' }}
var request = require('request')
var options = {
  method: 'POST',
  url: 'https://api.ioii.cn/v1/agicto/chat',
  headers: {
    'Content-Type': 'application/json',
    Authorization: 'Bearer 自己的API key'
  },
  body: JSON.stringify({
    model: '360gpt-pro',
    messages: [
      {
        role: 'user',
        content: '讲个笑话'
      }
    ],
    max_tokens: 50,
    presence_penalty: 0.5,
    stream: false,
    temperature: 0.7,
    top_p: 1,
    top_k: 50,
    enable_search: true
  })
}
request(options, function (error, response) {
  if (error) throw new Error(error)
  console.log(response.body)
})
```

```python {{ title: 'Python' }}
import requests
import json

url = "https://api.ioii.cn/v1/agicto/chat"

payload = json.dumps({
  "model": "360gpt-pro",
  "messages": [
    {
      "role": "user",
      "content": "讲个笑话"
    }
  ],
  "max_tokens": 50,
  "presence_penalty": 0.5,
  "stream": False,
  "temperature": 0.7,
  "top_p": 1,
  "top_k": 50,
  "enable_search": True
})
headers = {
  'Content-Type': 'application/json',
  'Authorization': 'Bearer 自己的API key'
}

response = requests.request("POST", url, headers=headers, data=payload)

print(response.text)


```

```php {{ title: 'PHP' }}
<?php
require_once 'HTTP/Request2.php';
$request = new HTTP_Request2();
$request->setUrl('https://api.ioii.cn/v1/agicto/chat');
$request->setMethod(HTTP_Request2::METHOD_POST);
$request->setConfig(array(
  'follow_redirects' => TRUE
));
$request->setHeader(array(
  'Content-Type' => 'application/json',
  'Authorization' => 'Bearer 自己的API key'
));
$request->setBody('{\n    "model": "360gpt-pro",\n    "messages": [\n        \n        {\n            "role": "user",\n            "content": "讲个笑话"\n        } \n    ],\n    "max_tokens": 50,\n    "presence_penalty": 0.5,\n    "stream": false,\n    "temperature": 0.7,\n    "top_p": 1.0,\n    "top_k": 50,\n    "enable_search": true\n}');
try {
  $response = $request->send();
  if ($response->getStatus() == 200) {
    echo $response->getBody();
  }
  else {
    echo 'Unexpected HTTP status: ' . $response->getStatus() . ' ' .
    $response->getReasonPhrase();
  }
}
catch(HTTP_Request2_Exception $e) {
  echo 'Error: ' . $e->getMessage();
}

```

```java{{ title: 'Java' }}
OkHttpClient client = new OkHttpClient().newBuilder()
  .build();
MediaType mediaType = MediaType.parse("application/json");
RequestBody body = RequestBody.create(mediaType, "{\n    \"model\": \"360gpt-pro\",\n    \"messages\": [\n        \n        {\n            \"role\": \"user\",\n            \"content\": \"讲个笑话\"\n        } \n    ],\n    \"max_tokens\": 50,\n    \"presence_penalty\": 0.5,\n    \"stream\": false,\n    \"temperature\": 0.7,\n    \"top_p\": 1.0,\n    \"top_k\": 50,\n    \"enable_search\": true\n}");
Request request = new Request.Builder()
  .url("https://api.ioii.cn/v1/agicto/chat")
  .method("POST", body)
  .addHeader("Content-Type", "application/json")
  .addHeader("Authorization", "Bearer 自己的API key")
  .build();
Response response = client.newCall(request).execute();
```

</CodeGroup>

## 支持模型

<Libraries />

## 注意事项

- 请确保正确填写参数，以获得符合预期的生成文本。
- 适度调整**temperature**、**top_p**和**top_k**以满足具体需求。
- 联网搜索可能会增加生成时间，确保网络连接正常。 -->
